<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <link href="src/css/bootstrap.min.css" rel="stylesheet">
    <script src="src/js/bootstrap.bundle.min.js"></script>
    <link rel="stylesheet" href="style.css">

    <title>VerdeTech Farm - Fale Conosco</title>
    <link rel="icon" href="img/logo.ico" type="image/x-icon">
</head>
<body>
    <header>
        <nav class="d-flex justify-content-between align-items-center container py-3">
            <div class="logo">
                <a href="index.html"><img src="img/logo.png" alt=""></a>
            </div>
            <div>
                <ul class="d-flex justify-content-center align-items-center">
                    <li>
                        <a href="index.html">INÍCIO</a>
                    </li>
                    <li>
                        <a href="produtos.html">PRODUTOS</a>
                    </li>
                    <li>    
                        <a href="entrega.html">ENTREGA</a>
                    </li>
                    <li>
                        <a href="contato.html">FALE CONOSCO</a>
                    </li>
                </ul>       
            </div>
            <div class="d-flex">
                <ul>
                    <li class="mr-0 position-relative">
                        <a href="carrinho.html">
                            <img src="../img/carrinho-de-compras.png" alt="Carrinho">
                            <span id="cart-counter" class="position-absolute top-0 start-100 translate-middle badge rounded-pill bg-danger">
                                0
                            </span>
                        </a>
                    </li>
                    <li>
                        <a href="login.html"><img src="../img/perfil.png" alt="Perfil"></a>
                    </li>
                </ul>
            </div>
        </nav>
    </header>

    <main>
        <section>
            <div class="container">
                <div class="d-flex align-items-center mb-5">
                    <p class="mr-2 mb-0" id="nomeUsuario"></p>
                    <button id="logout" class="btn-logout">Sair</button>       
                </div>
                <h2>
                    FALE CONOSCO
                </h2>
                <P>
                    Para mais informações, nos contate através do nosso email ou número de telefone abaixo
                </P>
                <p>
					<b>E-mail:</b><a href="mailto:suporte@verdetech.com.br" target="d_blank">
						suporte@verdetech.com.br</a> <br>
				</p>
				<p>
					<b>Telefone:</b> <a href="tel">(11) 99999-9999</a>
				</p>
            </div>
        </section>
    </main>

    <script>
                document.addEventListener('DOMContentLoaded', () => {
            const nomeUsuario = document.getElementById('nomeUsuario');
            const logoutBtn = document.getElementById('logout');

            // Verifica se existe um usuário logado no sessionStorage
            const usuarioLogado = JSON.parse(sessionStorage.getItem('usuarioLogado'));

            if (usuarioLogado) {
                // Se o usuário estiver logado, exibe o nome e o botão de logout
                nomeUsuario.textContent = `Bem-vindo(a), ${usuarioLogado.nome}!`;
                logoutBtn.style.display = 'block'; // Torna o botão de logout visível
            } else {
                // Se não houver usuário logado, o botão não aparece
                nomeUsuario.textContent = 'Você não está logado.';
                logoutBtn.style.display = 'none'; // Oculta o botão de logout
            }

            // Adiciona a funcionalidade de logout
            logoutBtn.addEventListener('click', () => {
                sessionStorage.removeItem('usuarioLogado'); // Remove o usuário da sessão
                alert('Você saiu da sua conta.');
                window.location.href = 'login.html'; // Redireciona para a página de login
            });
        });
        
        // Função para atualizar o contador do carrinho
        function updateCartCounter() {
            const cart = JSON.parse(localStorage.getItem('cart')) || [];
            const cartCounter = document.getElementById('cart-counter');
            cartCounter.textContent = cart.length; // Define o número total de itens no carrinho
    
            // Esconde o contador se não houver itens
            cartCounter.style.display = cart.length > 0 ? 'block' : 'none';
        }
    
        // Adicionar produto ao carrinho
        document.querySelectorAll('.product-item .btn').forEach(button => {
            button.addEventListener('click', () => {
                const productItem = button.closest('.product-item');
                const product = {
                    name: productItem.querySelector('.product-name').textContent,
                    price: productItem.querySelector('.product-price').textContent,
                    image: productItem.querySelector('img').src,
                };
    
                // Adicionar ao localStorage
                let cart = JSON.parse(localStorage.getItem('cart')) || [];
                cart.push(product);
                localStorage.setItem('cart', JSON.stringify(cart));
    
                // Atualiza o contador do carrinho
                updateCartCounter();
    
                alert('Produto adicionado ao carrinho!');
            });
        });
    
        // Atualizar contador do carrinho ao carregar a página
        document.addEventListener('DOMContentLoaded', updateCartCounter);
    </script>
</body>
</html>